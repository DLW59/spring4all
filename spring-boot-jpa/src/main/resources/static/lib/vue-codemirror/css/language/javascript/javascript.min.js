!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,r){function n(e,t,r){return ge=e,je=r,t}function a(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=function(e){return function(t,r){var i,o=!1;if(Ae&&"@"==t.peek()&&t.match(Ce))return r.tokenize=a,n("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=e||o);)o=!o&&"\\"==i;return o||(r.tokenize=a),n("string","string")}}(r),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return n("number","number");if("."==r&&e.match(".."))return n("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return n(r);if("="==r&&e.eat(">"))return n("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),n("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),n("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),n("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),n("number","number");if("/"==r)return e.eat("*")?(t.tokenize=i,i(e,t)):e.eat("/")?(e.skipToEnd(),n("comment","comment")):he(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),n("regexp","string-2")):(e.eat("="),n("operator","operator",e.current()));if("`"==r)return t.tokenize=o,o(e,t);if("#"==r)return e.skipToEnd(),n("error","error");if($e.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),n("operator","operator",e.current());if(Ie.test(r)){e.eatWhile(Ie);var c=e.current();if("."!=t.lastType){if(Te.propertyIsEnumerable(c)){var s=Te[c];return n(s.type,s.style,c)}if("async"==c&&e.match(/^(\s|\/\*.*?\*\/)*[\(\w]/,!1))return n("async","keyword",c)}return n("variable","variable",c)}}function i(e,t){for(var r,i=!1;r=e.next();){if("/"==r&&i){t.tokenize=a;break}i="*"==r}return n("comment","comment")}function o(e,t){for(var r,i=!1;null!=(r=e.next());){if(!i&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=a;break}i=!i&&"\\"==r}return n("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(ze){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var a=0,i=!1,o=r-1;o>=0;--o){var c=e.string.charAt(o),s=qe.indexOf(c);if(s>=0&&s<3){if(!a){++o;break}if(0==--a){"("==c&&(i=!0);break}}else if(s>=3&&s<6)++a;else if(Ie.test(c))i=!0;else{if(/["'\/]/.test(c))return;if(i&&!a){++o;break}}}i&&!a&&(t.fatArrowAt=o)}}function s(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function u(e,t){for(n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function f(){for(var e=arguments.length-1;e>=0;e--)Pe.cc.push(arguments[e])}function l(){return f.apply(null,arguments),!0}function d(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var n=Pe.state;if(Pe.marked="def",n.context){if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function p(){Pe.state.context={prev:Pe.state.context,vars:Pe.state.localVars},Pe.state.localVars=Se}function m(){Pe.state.localVars=Pe.state.context.vars,Pe.state.context=Pe.state.context.prev}function v(e,t){var r=function(){var r=Pe.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var a=r.lexical;a&&")"==a.type&&a.align;a=a.prev)n=a.indented;r.lexical=new s(n,Pe.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function y(){var e=Pe.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function k(e){function t(r){return r==e?l():";"==e?f():l(t)}return t}function b(e,t){return"var"==e?l(v("vardef",t.length),R,k(";"),y):"keyword a"==e?l(v("form"),h,b,y):"keyword b"==e?l(v("form"),b,y):"keyword d"==e?Pe.stream.match(/^\s*$/,!1)?l():l(v("stat"),j,k(";"),y):"debugger"==e?l(k(";")):"{"==e?l(v("}"),W,y):";"==e?l():"if"==e?("else"==Pe.state.lexical.info&&Pe.state.cc[Pe.state.cc.length-1]==y&&Pe.state.cc.pop()(),l(v("form"),h,b,y,ee)):"function"==e?l(oe):"for"==e?l(v("form"),te,b,y):"variable"==e?ze&&"type"==t?(Pe.marked="keyword",l(H,k("operator"),H,k(";"))):ze&&"declare"==t?(Pe.marked="keyword",l(b)):ze&&("module"==t||"enum"==t)&&Pe.stream.match(/^\s*\w/,!1)?(Pe.marked="keyword",l(v("form"),X,k("{"),v("}"),W,y,y)):l(v("stat"),T):"switch"==e?l(v("form"),h,k("{"),v("}","switch"),W,y,y):"case"==e?l(w,k(":")):"default"==e?l(k(":")):"catch"==e?l(v("form"),p,k("("),ce,k(")"),b,y,m):"class"==e?l(v("form"),ue,y):"export"==e?l(v("stat"),pe,y):"import"==e?l(v("stat"),ve,y):"async"==e?l(b):"@"==t?l(w,b):f(v("stat"),w,k(";"),y)}function w(e){return g(e,!1)}function x(e){return g(e,!0)}function h(e){return"("!=e?f():l(v(")"),w,k(")"),y)}function g(e,t){if(Pe.state.fatArrowAt==Pe.stream.start){var r=t?I:z;if("("==e)return l(p,v(")"),P(ce,")"),y,k("=>"),r,m);if("variable"==e)return f(p,X,k("=>"),r,m)}var n=t?V:M;return Oe.hasOwnProperty(e)?l(n):"function"==e?l(oe,n):"class"==e?l(v("form"),se,y):"keyword c"==e||"async"==e?l(t?x:w):"("==e?l(v(")"),j,k(")"),y,n):"operator"==e||"spread"==e?l(t?x:w):"["==e?l(v("]"),xe,y,n):"{"==e?S(C,"}",null,n):"quasi"==e?f(A,n):"new"==e?l(function(e){return function(t){return"."==t?l(e?function(e,t){if("target"==t)return Pe.marked="keyword",l(V)}:function(e,t){if("target"==t)return Pe.marked="keyword",l(M)}):"variable"==t&&ze?l(K,e?V:M):f(e?x:w)}}(t)):l()}function j(e){return e.match(/[;\}\)\],]/)?f():f(w)}function M(e,t){return","==e?l(w):V(e,t,!1)}function V(e,t,r){var n=0==r?M:V,a=0==r?w:x;return"=>"==e?l(p,r?I:z,m):"operator"==e?/\+\+|--/.test(t)||ze&&"!"==t?l(n):ze&&"<"==t&&Pe.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?l(v(">"),P(H,">"),y,n):"?"==t?l(w,k(":"),a):l(a):"quasi"==e?f(A,n):";"!=e?"("==e?S(x,")","call",n):"."==e?l($,n):"["==e?l(v("]"),j,k("]"),y,n):ze&&"as"==t?(Pe.marked="keyword",l(H,n)):"regexp"==e?(Pe.state.lastType=Pe.marked="operator",Pe.stream.backUp(Pe.stream.pos-Pe.stream.start-1),l(a)):void 0:void 0}function A(e,t){return"quasi"!=e?f():"${"!=t.slice(t.length-2)?l(A):l(w,E)}function E(e){if("}"==e)return Pe.marked="string-2",Pe.state.tokenize=o,l(A)}function z(e){return c(Pe.stream,Pe.state),f("{"==e?b:w)}function I(e){return c(Pe.stream,Pe.state),f("{"==e?b:x)}function T(e){return":"==e?l(y,b):f(M,k(";"),y)}function $(e){if("variable"==e)return Pe.marked="property",l()}function C(e,t){if("async"==e)return Pe.marked="property",l(C);if("variable"==e||"keyword"==Pe.style){if(Pe.marked="property","get"==t||"set"==t)return l(q);var r;return ze&&Pe.state.fatArrowAt==Pe.stream.start&&(r=Pe.stream.match(/^\s*:\s*/,!1))&&(Pe.state.fatArrowAt=Pe.stream.pos+r[0].length),l(O)}return"number"==e||"string"==e?(Pe.marked=Ae?"property":Pe.style+" property",l(O)):"jsonld-keyword"==e?l(O):"modifier"==e?l(C):"["==e?l(w,k("]"),O):"spread"==e?l(x,O):"*"==t?(Pe.marked="keyword",l(C)):":"==e?f(O):void 0}function q(e){return"variable"!=e?f(O):(Pe.marked="property",l(oe))}function O(e){return":"==e?l(x):"("==e?f(oe):void 0}function P(e,t,r){function n(a,i){if(r?r.indexOf(a)>-1:","==a){var o=Pe.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),l(function(r,n){return r==t||n==t?f():f(e)},n)}return a==t||i==t?l():l(k(t))}return function(r,a){return r==t||a==t?l():f(e,n)}}function S(e,t,r){for(var n=3;n<arguments.length;n++)Pe.cc.push(arguments[n]);return l(v(t,r),P(e,t),y)}function W(e){return"}"==e?l():f(b,W)}function N(e,t){if(ze){if(":"==e)return l(H);if("?"==t)return l(N)}}function U(e){if(ze&&":"==e)return Pe.stream.match(/^\s*\w+\s+is\b/,!1)?l(w,B,H):l(H)}function B(e,t){if("is"==t)return Pe.marked="keyword",l()}function H(e,t){return"variable"==e||"void"==t?"keyof"==t?(Pe.marked="keyword",l(H)):(Pe.marked="type",l(J)):"string"==e||"number"==e||"atom"==e?l(J):"["==e?l(v("]"),P(H,"]",","),y,J):"{"==e?l(v("}"),P(F,"}",",;"),y,J):"("==e?l(P(G,")"),D):void 0}function D(e){if("=>"==e)return l(H)}function F(e,t){return"variable"==e||"keyword"==Pe.style?(Pe.marked="property",l(F)):"?"==t?l(F):":"==e?l(H):"["==e?l(w,N,k("]"),F):void 0}function G(e){return"variable"==e?l(G):":"==e?l(H):void 0}function J(e,t){return"<"==t?l(v(">"),P(H,">"),y,J):"|"==t||"."==e?l(H):"["==e?l(k("]"),J):"extends"==t?l(H):void 0}function K(e,t){if("<"==t)return l(v(">"),P(H,">"),y,J)}function L(){return f(H,Q)}function Q(e,t){if("="==t)return l(H)}function R(){return f(X,N,Z,_)}function X(e,t){return"modifier"==e?l(X):"variable"==e?(d(t),l()):"spread"==e?l(X):"["==e?S(X,"]"):"{"==e?S(Y,"}"):void 0}function Y(e,t){return"variable"!=e||Pe.stream.match(/^\s*:/,!1)?("variable"==e&&(Pe.marked="property"),"spread"==e?l(X):"}"==e?f():l(k(":"),X,Z)):(d(t),l(Z))}function Z(e,t){if("="==t)return l(x)}function _(e){if(","==e)return l(R)}function ee(e,t){if("keyword b"==e&&"else"==t)return l(v("form","else"),b,y)}function te(e){if("("==e)return l(v(")"),re,k(")"),y)}function re(e){return"var"==e?l(R,k(";"),ae):";"==e?l(ae):"variable"==e?l(ne):f(w,k(";"),ae)}function ne(e,t){return"in"==t||"of"==t?(Pe.marked="keyword",l(w)):l(M,ae)}function ae(e,t){return";"==e?l(ie):"in"==t||"of"==t?(Pe.marked="keyword",l(w)):f(w,k(";"),ie)}function ie(e){")"!=e&&l(w)}function oe(e,t){return"*"==t?(Pe.marked="keyword",l(oe)):"variable"==e?(d(t),l(oe)):"("==e?l(p,v(")"),P(ce,")"),y,U,b,m):ze&&"<"==t?l(v(">"),P(L,">"),y,oe):void 0}function ce(e,t){return"@"==t&&l(w,ce),"spread"==e||"modifier"==e?l(ce):f(X,N,Z)}function se(e,t){return"variable"==e?ue(e,t):fe(e,t)}function ue(e,t){if("variable"==e)return d(t),l(fe)}function fe(e,t){return"<"==t?l(v(">"),P(L,">"),y,fe):"extends"==t||"implements"==t||ze&&","==e?l(ze?H:w,fe):"{"==e?l(v("}"),le,y):void 0}function le(e,t){return"modifier"==e||"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t)&&Pe.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Pe.marked="keyword",l(le)):"variable"==e||"keyword"==Pe.style?(Pe.marked="property",l(ze?de:oe,le)):"["==e?l(w,k("]"),ze?de:oe,le):"*"==t?(Pe.marked="keyword",l(le)):";"==e?l(le):"}"==e?l():"@"==t?l(w,le):void 0}function de(e,t){return"?"==t?l(de):":"==e?l(H,Z):"="==t?l(x):f(oe)}function pe(e,t){return"*"==t?(Pe.marked="keyword",l(we,k(";"))):"default"==t?(Pe.marked="keyword",l(w,k(";"))):"{"==e?l(P(me,"}"),we,k(";")):f(b)}function me(e,t){return"as"==t?(Pe.marked="keyword",l(k("variable"))):"variable"==e?f(x,me):void 0}function ve(e){return"string"==e?l():f(ye,ke,we)}function ye(e,t){return"{"==e?S(ye,"}"):("variable"==e&&d(t),"*"==t&&(Pe.marked="keyword"),l(be))}function ke(e){if(","==e)return l(ye,ke)}function be(e,t){if("as"==t)return Pe.marked="keyword",l(ye)}function we(e,t){if("from"==t)return Pe.marked="keyword",l(w)}function xe(e){return"]"==e?l():f(P(x,"]"))}function he(e,t,r){return t.tokenize==a&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}var ge,je,Me=t.indentUnit,Ve=r.statementIndent,Ae=r.jsonld,Ee=r.json||Ae,ze=r.typescript,Ie=r.wordCharacters||/[\w$\xa1-\uffff]/,Te=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("keyword d"),i=e("operator"),o={type:"atom",style:"atom"},c={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:a,break:a,continue:a,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,typeof:i,instanceof:i,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n};if(ze){var s={type:"variable",style:"type"},u={interface:e("class"),implements:n,namespace:n,public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),readonly:e("modifier"),string:s,number:s,boolean:s,any:s};for(var f in u)c[f]=u[f]}return c}(),$e=/[+\-*&%=<>!?|~^@]/,Ce=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,qe="([{}])",Oe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Pe={state:null,column:null,marked:null,cc:null},Se={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new s((e||0)-Me,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=i&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==ge?r:(t.lastType="operator"!=ge||"++"!=je&&"--"!=je?ge:"incdec",function(e,t,r,n,a){var i=e.cc;for(Pe.state=e,Pe.stream=a,Pe.marked=null,Pe.cc=i,Pe.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():Ee?w:b)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return Pe.marked?Pe.marked:"variable"==r&&u(e,n)?"variable-2":t}}(t,r,ge,je,e))},indent:function(t,n){if(t.tokenize==i)return e.Pass;if(t.tokenize!=a)return 0;var o,c=n&&n.charAt(0),s=t.lexical;if(!/^\s*else\b/.test(n))for(var u=t.cc.length-1;u>=0;--u){var f=t.cc[u];if(f==y)s=s.prev;else if(f!=ee)break}for(;("stat"==s.type||"form"==s.type)&&("}"==c||(o=t.cc[t.cc.length-1])&&(o==M||o==V)&&!/^[,\.=+\-*:?[\(]/.test(n));)s=s.prev;Ve&&")"==s.type&&"stat"==s.prev.type&&(s=s.prev);var l=s.type,d=c==l;return"vardef"==l?s.indented+("operator"==t.lastType||","==t.lastType?s.info+1:0):"form"==l&&"{"==c?s.indented:"form"==l?s.indented+Me:"stat"==l?s.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||$e.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,n)?Ve||Me:0):"switch"!=s.info||d||0==r.doubleIndentSwitch?s.align?s.column+(d?0:1):s.indented+(d?0:Me):s.indented+(/^(?:case|default)\b/.test(n)?Me:2*Me)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ee?null:"/*",blockCommentEnd:Ee?null:"*/",blockCommentContinue:Ee?null:" * ",lineComment:Ee?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ee?"json":"javascript",jsonldMode:Ae,jsonMode:Ee,expressionAllowed:he,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=w&&t!=x||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});